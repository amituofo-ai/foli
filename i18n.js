const I18N = {
    'zh-CN': {
        app_title: '燃灯佛历',
        settings: '设置',
        tab_calendar: '日历',
        tab_chant: '功课',
        tab_search: '搜索',
        tab_dharma: '佛法',
        weekdays: ['日', '一', '二', '三', '四', '五', '六'],
        today_info: '今日讯息',
        today_tip: '今日修行提示',
        tip_content: '居士道者，当为如下之做，一者护法，二者持菩萨戒，三者随善知识学，四至十三者为普贤愿望！善知识，如是之作者，能为福报种，做佛门因！吾说是人乃佛坐下大居士道者！',
        search_placeholder: '搜索开示、佛经...',
        filter_all: '全部',
        filter_teaching: '文字开示',
        filter_sutra: '佛经',
        filter_result: '深度搜索',
        dharma_text: '文字开示',
        dharma_text_sub: '佛陀开示集',
        dharma_video: '影片开示',
        dharma_video_sub: '法会与讲座视频',
        dharma_audio: '语音开示',
        dharma_audio_sub: '随身聆听法音',
        dharma_master: '祖师大德',
        dharma_master_sub: '历代高僧行谊',
        dharma_sutras: '佛经阅览',
        dharma_sutras_sub: '大乘经典',
        counter_mode: '念佛计数',
        meditation_mode: '打坐计时',
        reset_confirm: '确定要重置今日计数吗？',
        meditation_status_ready: '准备开始',
        meditation_status_running: '禅修中...',
        meditation_status_paused: '已暂停',
        meditation_status_done: '圆满结束',
        meditation_alert: '禅修圆满！共 {min} 分钟。',
        history_label: '记录',
        unit_sound: '声',
        unit_min: '分',
        language_label: '语言 / Language',
        chant_counter: '念佛计数',
        chant_timer: '打坐计时',
        today_homework: '今日功课',
        chant_target: '南无阿弥陀佛',
        chant_count_today: '今日已念诵',
        reader_title: '文字开示',
        loading: '正在加载文章...',
        reader_settings: '阅读设置',
        font_size_label: '字体大小',
        preview_text: '预览文字 Preview Text.<br>此设置仅影响佛经与开示的阅读页面。',
        fast_day_ten: '十斋日',
        fast_day_six: '六斋日',
        fast_day_shuo: '朔日',
        fast_day_month: '月斋',
        desc_ten_fast: '建议在佛菩萨前读诵《地藏菩萨本愿经》。',
        desc_six_fast_8: '初八日：帝释敕四天王各治一方。农历每月初八日，四王遣辅臣观察世间人民善恶。',
        desc_six_fast_14: '十四日：四天王遣太子按行天下，伺察人民善恶。',
        desc_six_fast_15: '十五日：四天王亲自按行天下，有慈教父母、恭敬三宝及尊长者，并修六度、持八戒斋者，诸天相庆，则降善福，注禄增算。如不修善持斋，唯造恶业，诸天忧戚，降以不祥，减禄除算。',
        desc_six_fast_23: '廿三日：四天王辅臣巡察。',
        desc_six_fast_29: '廿九日：四天王遣太子按行天下，伺察人民善恶。',
        desc_six_fast_29_end: '廿九日（晦日）：四天王亲自按行天下，有慈教父母、恭敬三宝及尊长者，并修六度、持八戒斋者，诸天相庆，则降善福，注禄增算。如不修善持斋，唯造恶业，诸天忧戚，降以不祥，减禄除算。',
        desc_six_fast_30: '三十日：四天王亲自按行天下，有慈教父母、恭敬三宝及尊长者，并修六度、持八戒斋者，诸天相庆，则降善福，注禄增算。如不修善持斋，唯造恶业，诸天忧戚，降以不祥，减禄除算。',
        desc_six_fast_28_small: '廿八日（小月）：四天王遣太子按行天下，伺察人民善惡。',
        '彌勒菩薩聖誕': '弥勒菩萨圣诞',
        today_fast_title: '今日斋期',
        today_no_special: '今日无特殊节日，适合日常修行。',
        recommendation_prefix: '建议：',
        default_recommendation: '清净身心，茹素念佛。',
        tab_diet: '素斋',
        zen_diet_title: '今日禅食',
        diet_loading: '正在生成今日禅食...',
        diet_ingredients: '食材',
        diet_steps: '做法',
        diet_quote: '禅意寄语',
        diet_refresh: '换一道菜',
        era_label: '佛历计算',
        search_no_results: '未找到相关结果',
        search_loading_db: '正在载入搜索数据库...',
        search_load_fail: '数据加载失败，请检查网络',
        term_explanation: '名词释疑',
        cat_doc: '文档',
        cat_sutra: '佛经',
        cat_master: '祖师',
        cat_teaching: '开示',
        cat_data: '资料',
        loading_lunar: '正在加载农历数据...',
        loading_timeout: '如长时间无反应，请<a href="javascript:location.reload()" class="underline">刷新页面</a>',
        nothing_suitable: '诸事不宜',
        nothing_taboo: '诸事不忌',
        yi_label: '宜',
        ji_label: '忌',
        error_data: '数据加载错误',
        retry_refresh: '请刷新页面重试',
        gan_label: '天干',
        zhi_label: '地支',
        belongs_to: '属',
        info_today: '今日信息',
        info_day: '当日信息',
        video_mobile_warning: '当前为移动网络，请注意流量消耗',
        video_watch_youtube: '在 YouTube 观看',
        // Common
        date_day_suffix: '日',
        // Add Event Page
        add_event_title: '添加事件',
        edit_event_title: '编辑事件',
        event_cancel: '取消',
        event_save: '保存',
        event_delete: '删除事件',
        event_title_placeholder: '标题',
        event_all_day: '全天',
        event_start: '开始',
        event_end: '结束',
        event_desc_placeholder: '备注',
        event_delete_confirm: '确定要删除这个事件吗？',
        event_saved: '事件已保存',
        // Practice/Homework Tab
        history_empty: '暂无记录',
        counter_save_confirm: '确定要保存记录并归零吗？',
        meditation_less_than_1min: '打坐时间不足 1 分钟，不予记录。',
        meditation_save_confirm: '确定要保存此次禅修记录并归零吗？',
        meditation_duration_short: '<1 分',
        meditation_duration_min: '{min} 分',
        meditation_status_ready: '准备开始',
        meditation_status_running: '禅修中...',
        meditation_status_paused: '已暂停',
        meditation_status_done: '圆满结束',
        meditation_alert: '禅修圆满！共 {min} 分钟。',
        // Statistics
        stats_title: '月度修持统计',
        stats_chant: '念佛 (声)',
        stats_meditation: '打坐 (分)',
        stats_month_view: '本月概览'
    },
    'zh-TW': {
        app_title: '燃燈佛曆',
        settings: '設置',
        tab_calendar: '日曆',
        tab_chant: '功課',
        tab_search: '搜索',
        tab_dharma: '佛法',
        weekdays: ['日', '一', '二', '三', '四', '五', '六'],
        today_info: '今日訊息',
        today_tip: '今日修行提示',
        tip_content: '居士道者，當為如下之做，一者護法，二者持菩薩戒，三者隨善知識學，四至十三者為普賢願望！善知識，如是之作者，能為福報種，做佛門因！吾說是人乃佛坐下大居士道者！',
        search_placeholder: '搜索開示、佛經...',
        filter_all: '全部',
        filter_teaching: '文字開示',
        filter_sutra: '佛經',
        filter_result: '深度搜索',
        dharma_text: '文字開示',
        dharma_text_sub: '佛陀開示集',
        dharma_video: '影片開示',
        dharma_video_sub: '法會與講座視頻',
        dharma_audio: '語音開示',
        dharma_audio_sub: '隨身聆聽法音',
        dharma_master: '祖師大德',
        dharma_master_sub: '歷代高僧行誼',
        dharma_sutras: '佛經閱覽',
        dharma_sutras_sub: '大乘經典',
        counter_mode: '念佛計數',
        meditation_mode: '打坐計時',
        reset_confirm: '確定要重置今日計數嗎？',
        meditation_status_ready: '準備開始',
        meditation_status_running: '禪修中...',
        meditation_status_paused: '已暫停',
        meditation_status_done: '圓滿結束',
        meditation_alert: '禪修圓滿！共 {min} 分鐘。',
        history_label: '記錄',
        unit_sound: '聲',
        today_fast_title: '今日齋期',
        today_no_special: '今日無特殊節日，適合日常修行。',
        recommendation_prefix: '建議：',
        default_recommendation: '清淨身心，茹素唸佛。',
        unit_min: '分',
        tab_diet: '素齋',
        zen_diet_title: '今日禪食',
        diet_loading: '正在生成今日禪食...',
        diet_ingredients: '食材',
        diet_steps: '做法',
        diet_quote: '禪意寄語',
        diet_refresh: '換一道菜',
        era_label: '佛曆計算',
        fast_day_ten: '十齋日',
        fast_day_six: '六齋日',
        fast_day_shuo: '朔日',
        fast_day_month: '月齋',
        desc_ten_fast: '建議在佛菩薩前讀誦《地藏菩薩本願經》。',
        desc_six_fast_8: '初八日：帝釋敕四天王各治一方。農曆每月初八日，四王遣輔臣觀察世間人民善惡。',
        desc_six_fast_14: '十四日：四天王遣太子按行天下，伺察人民善惡。',
        desc_six_fast_15: '十五日：四天王親自按行天下，有慈教父母、恭敬三寶及尊長者，並修六度、持八戒齋者，諸天相慶，則降善福，注祿增算。如不修善持齋，唯造惡業，諸天憂戚，降以不祥，減祿除算。',
        desc_six_fast_23: '廿三日：四天王輔臣巡察。',
        desc_six_fast_29: '廿九日：四天王遣太子按行天下，伺察人民善惡。',
        desc_six_fast_29_end: '廿九日（晦日）：四天王親自按行天下，有慈教父母、恭敬三寶及尊長者，並修六度、持八戒齋者，諸天相慶，則降善福，注祿增算。如不修善持齋，唯造惡業，諸天憂戚，降以不祥，減祿除算。',
        desc_six_fast_30: '三十日：四天王親自按行天下，有慈教父母、恭敬三寶及尊長者，並修六度、持八戒齋者，諸天相慶，則降善福，注祿增算。如不修善持齋，唯造惡業，諸天憂戚，降以不祥，減祿除算。',
        desc_six_fast_28_small: '廿八日（小月）：四天王遣太子按行天下，伺察人民善惡。',
        search_no_results: '未找到相關結果',
        search_loading_db: '正在載入搜索數據庫...',
        search_load_fail: '數據加載失敗，請檢查網絡',
        term_explanation: '名詞釋疑',
        cat_doc: '文檔',
        cat_sutra: '佛經',
        cat_master: '祖師',
        cat_teaching: '開示',
        cat_data: '資料',
        loading_lunar: '正在加載農曆數據...',
        loading_timeout: '如長時間無反應，請<a href="javascript:location.reload()" class="underline">刷新頁面</a>',
        nothing_suitable: '諸事不宜',
        nothing_taboo: '諸事不忌',
        yi_label: '宜',
        ji_label: '忌',
        error_data: '數據加載錯誤',
        retry_refresh: '請刷新頁面重試',
        gan_label: '天干',
        zhi_label: '地支',
        belongs_to: '屬',
        info_today: '今日訊息',
        info_day: '當日訊息',
        video_mobile_warning: '當前為移動網絡，請注意流量消耗',
        video_watch_youtube: '在 YouTube 觀看',
        // Common
        date_day_suffix: '日',
        // Add Event Page
        add_event_title: '添加事件',
        edit_event_title: '編輯事件',
        event_cancel: '取消',
        event_save: '保存',
        event_delete: '刪除事件',
        event_title_placeholder: '標題',
        event_all_day: '全天',
        event_start: '開始',
        event_end: '結束',
        event_desc_placeholder: '備註',
        event_delete_confirm: '確定要刪除這個事件嗎？',
        event_saved: '事件已保存',
        // Practice/Homework Tab
        history_empty: '暫無記錄',
        counter_save_confirm: '確定要保存記錄並歸零嗎？',
        meditation_less_than_1min: '打坐時間不足 1 分鐘，不予記錄。',
        meditation_save_confirm: '確定要保存此次禪修記錄並歸零嗎？',
        meditation_duration_short: '<1 分',
        meditation_duration_min: '{min} 分',
        // Statistics
        stats_title: '月度修持統計',
        stats_chant: '念佛 (聲)',
        stats_meditation: '打坐 (分)',
        stats_month_view: '本月概覽'
    },
    'en': {
        app_title: 'Lamp Buddha Calendar',
        settings: 'Settings',
        tab_calendar: 'Calendar',
        tab_chant: 'Practice',
        tab_search: 'Search',
        tab_dharma: 'Dharma',
        weekdays: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
        today_info: 'Today',
        today_tip: 'Daily Tip',
        tip_content: 'Practitioners should protect the Dharma, uphold the Bodhisattva precepts, learn from virtuous mentors, and cultivate the vows of Samantabhadra! Such actions plant the seeds of blessings and the causes of Buddhahood.',
        search_placeholder: 'Search teachings, sutras...',
        filter_all: 'All',
        filter_teaching: 'Teachings',
        filter_sutra: 'Sutras',
        filter_result: 'Deep Search',
        dharma_text: 'Teachings',
        dharma_text_sub: 'Buddha\'s Words',
        dharma_video: 'Videos',
        dharma_video_sub: 'Lectures & Events',
        dharma_audio: 'Audio',
        dharma_audio_sub: 'Listen Anywhere',
        dharma_master: 'Masters',
        dharma_master_sub: 'Biographies',
        dharma_sutras: 'Sutras',
        dharma_sutras_sub: 'Mahayana Texts',
        counter_mode: 'Chanting',
        meditation_mode: 'Meditation',
        reset_confirm: 'Reset today\'s count?',
        meditation_status_ready: 'Ready',
        meditation_status_running: 'Meditating...',
        meditation_status_paused: 'Paused',
        meditation_status_done: 'Completed',
        meditation_alert: 'Meditation completed! Total {min} mins.',
        history_label: 'History',
        unit_sound: ' ',
        unit_min: ' m',
        language_label: 'Language',
        chant_counter: 'Chanting',
        chant_timer: 'Meditation',
        today_homework: 'Daily Practice',
        chant_target: 'Namo Amitabha',
        chant_count_today: 'Count Today',
        reader_title: 'Reader',
        loading: 'Loading article...',
        reader_settings: 'Reader Settings',
        font_size_label: 'Font Size',
        preview_text: 'Preview Text.<br>This setting affects sutra and teaching pages only.',
        fast_day_ten: 'Ten Fast Days',
        fast_day_six: 'Six Fast Days',
        fast_day_shuo: 'Shuo (New Moon)',
        fast_day_month: 'Month Fast',
        desc_ten_fast: 'It is recommended to recite the "Sutra of the Past Vows of Earth Store Bodhisattva".',
        desc_six_fast_8: '8th Day: Heavenly Kings inspect the world.',
        desc_six_fast_14: '14th Day: The Prince of Heavenly Kings patrols the world.',
        desc_six_fast_15: '15th Day: Heavenly Kings personally inspect good and evil deeds. Doing good brings blessings; doing evil brings misfortune.',
        desc_six_fast_23: '23rd Day: Officials of Heavenly Kings inspect.',
        desc_six_fast_29: '29th Day: The Prince of Heavenly Kings patrols.',
        desc_six_fast_29_end: '29th Day (Month End): Heavenly Kings personally inspect. Doing good brings blessings.',
        desc_six_fast_30: '30th Day: Heavenly Kings personally inspect. Doing good brings blessings.',
        desc_six_fast_28_small: '28th Day (Small Month): The Prince of Heavenly Kings patrols.',
        '彌勒菩薩聖誕': 'Maitreya Bodhisattva Birthday',
        today_fast_title: 'Fast Day',
        today_no_special: 'No special festival today, suitable for daily practice.',
        recommendation_prefix: 'Recommendation: ',
        default_recommendation: 'Purify body and mind, eat vegetarian, and chant.',
        tab_diet: 'Diet',
        zen_diet_title: 'Zen Meal',
        diet_loading: 'Preparing Zen Meal...',
        diet_ingredients: 'Ingredients',
        diet_steps: 'Steps',
        diet_quote: 'Zen Quote',
        diet_refresh: 'Refresh',
        era_label: 'Era Calculation',
        search_no_results: 'No results found',
        search_loading_db: 'Loading search database...',
        search_load_fail: 'Failed to load data, please check network',
        term_explanation: 'Term Explanation',
        cat_doc: 'Doc',
        cat_sutra: 'Sutra',
        cat_master: 'Master',
        cat_teaching: 'Teaching',
        cat_data: 'Data',
        loading_lunar: 'Loading Lunar Data...',
        loading_timeout: 'If no response, please <a href="javascript:location.reload()" class="underline">refresh</a>',
        nothing_suitable: 'Nothing suitable',
        nothing_taboo: 'No taboos',
        yi_label: 'Good',
        ji_label: 'Bad',
        error_data: 'Data Load Error',
        retry_refresh: 'Please refresh to retry',
        gan_label: 'Heavenly Stem',
        zhi_label: 'Earthly Branch',
        belongs_to: 'is',
        info_today: 'Today Info',
        info_day: 'Day Info',
        video_mobile_warning: 'Using mobile data, watch out for usage',
        video_watch_youtube: 'Watch on YouTube',
        // Common
        date_day_suffix: '',
        // Add Event Page
        add_event_title: 'Add Event',
        edit_event_title: 'Edit Event',
        event_cancel: 'Cancel',
        event_save: 'Save',
        event_delete: 'Delete',
        event_title_placeholder: 'Title',
        event_all_day: 'All Day',
        event_start: 'Start',
        event_end: 'End',
        event_desc_placeholder: 'Notes',
        event_delete_confirm: 'Are you sure you want to delete this event?',
        event_saved: 'Event saved',
        // Practice/Homework Tab
        history_empty: 'No records',
        counter_save_confirm: 'Confirm to save and reset count?',
        meditation_less_than_1min: 'Less than 1 minute, not recorded.',
        meditation_save_confirm: 'Confirm to save meditation session?',
        meditation_duration_short: '<1 min',
        meditation_duration_min: '{min} min',
        meditation_save_confirm: 'Save and reset this session?',
        meditation_duration_short: '<1 min',
        meditation_duration_min: '{min} mins',
        // Statistics
        stats_title: 'Monthly Stats',
        stats_chant: 'Chanting (Count)',
        stats_meditation: 'Meditation (Min)',
        stats_month_view: 'Overview'
    }
};

let currentLang = localStorage.getItem('app_language') || 'zh-TW';

function t(key) {
    if (!I18N[currentLang]) return key;
    return I18N[currentLang][key] || key;
}

function setLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('app_language', lang);
    location.reload(); 
}
